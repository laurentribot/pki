package main

import (
	"pki/ca"
	"pki/config"
	server "pki/http"

	"github.com/spf13/pflag"
)

// get pkey + certificate (optional AC)
// get crl for AC

// LS0tLS1CRUdJTiBDRVJUSUZJQ0FURSBSRVFVRVNULS0tLS0KTUlJQ3dUQ0NBYWtDQVFBd1dqRUxNQWtHQTFVRUJoTUNSbEl4RGpBTUJnTlZCQWdNQlZCQlVrbFRNUTR3REFZRApWUVFIREFWUVFWSkpVekVOTUFzR0ExVUVDZ3dFZEdWemRERU5NQXNHQTFVRUN3d0VkR1Z6ZERFTk1Bc0dBMVVFCkF3d0VkR1Z6ZERDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBTFNoazU0eisxMmsKd3pJbm9YdWpGK1U3alJJVFVTQ04wb1NNV1hsTmlMVzZQcEZBM3dQaGFkSjNnY3Q1TEg5bXdQVkYyNHJ4Vm50WAp0UG03ZWJYMGt5dnFJYUR4ekNMT0J0ZkFKSWthTHozRUxseU9XUHVGRjZqZ1grcE5kOVZvdzVTRnlkODlpcFg2CkxuY25WdEw1KzAvcTdPb0ZveTJBMEhQd2lMOEl3bUNUa3BhaEJvcVNSZ3NBSmpDSDkrbVltTHRZQkQ1ZWF5bW8KV09BazBNdE0rQ2E4bkJDRWdqMWtMekovYUdUa0VEUmRjb1ZsSTE1TkZTRWowVUZ1SS9xT0ZIUCszblVGN0NXSQpZcGd3TlNIQzljWm9sR1RIVDZpc3ZOeFBiOHl5aVRlM0JraDdZdTlWbThRLzdRKzBQb3Bic3I4RjN0U0ZwYndPCkVHcmNxQS8yWXBFQ0F3RUFBYUFpTUNBR0NTcUdTSWIzRFFFSkRqRVRNQkV3RHdZRFZSMFJCQWd3Qm9JRWRHVnoKZERBTkJna3Foa2lHOXcwQkFRc0ZBQU9DQVFFQU1nT0VDeWpFVytQVkpWUXdxMEVqL1Naa0pzTHd6UGYwUG9UUwpwS1A4MmJoMTU4MzVuUU50bUZ2bEwxVGk2WkpLc0owN0tPSmI3cmYxclQwTks0UG5rVGlPSGdqdURPQ2k3dkdTClFCZGc2UEZHSyt3K3A4ZzJTaEJEYmxFSU9UanhIemkwM3NZQjl3MnBwVDFtNXF2cVQ4SkNHZ0txN0FVN3VodXEKZkpQaU9memtlSUw1VlZXMVJFenJNN3FBYW5xNDkyOU5CaW5tV0hqaFdmZkdON0FCMDdjTzliU0VyaGFWVGErLwpMaGRPeDc1MVloUVZCZ0RlUWdFMTNFOXlDYmJFN2dFMTF1MDVLbmVVUk5ubHEzQklGKzEwUTdtYVRwQ2dKaGhuCm1NVDRLd0IxNG1XTnU3RGw0QWNxTStENk45S3Juc1R0U0cwNlhGYWRySGNGZWFqcmlRPT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUgUkVRVUVTVC0tLS0tCg

func main() {
	configFile := pflag.StringP("config", "c", "/etc/pki/config.yml", "Configuration file")
	pflag.Parse()

	config.ReadPkiConfig(*configFile)
	ca.LoadAuthorities()
	server.HttpServer()
}
